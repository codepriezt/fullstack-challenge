<template>
  <div class="h-screen w-screen overflow-x-hidden flex">
    <aside
      class="bg-dark-blue font-open-sans h-screen overflow-y-scroll flex-shrink-0 fixed top-0 z-20 w-72 transition-[left] duration-300 ease-in-out xl:shadow-none xl:left-0"
      :class="[isSideBarOpen ? 'left-0 shadow-3xl' : '-left-72 shadow-none']"
    >
      <nav class="my-10">
        <span class="text-white text-lg px-8 inline-block mb-4 font-semibold"
          >MENU</span
        >
        <ul class="space-y-1 flex flex-col w-full">
          <li @click="toggleSidebar(false)">
            <router-link
              to="/users"
              class="flex gap-3 px-8 py-3 text-white links"
              exact
            >
              <svg
                width="26"
                height="24"
                viewBox="0 0 26 24"
                fill="currentColor"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="education 1" clip-path="url(#clip0_2341_1482)">
                  <g id="Group">
                    <path
                      id="Vector"
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M17.8917 13.2953V11.5563C17.9716 11.2199 18.1167 11.1211 18.2828 11.0895C18.7328 11.0202 18.6823 13.1922 17.8917 13.2953ZM18.922 8.25302L18.8463 5.45225L14.2415 6.78325C13.8272 6.87367 13.4172 6.91782 13.0156 6.91993C12.5845 6.92203 12.1619 6.87367 11.7456 6.78325L7.34677 5.43964V8.28036C7.36149 8.46119 7.43928 8.6252 7.56334 8.77659C7.43508 9.11723 7.47503 9.50622 7.73576 9.93938C7.72315 10.1454 7.72735 10.3494 7.75679 10.5492L8.0028 10.6879V10.9339C7.89346 10.8078 7.761 10.7342 7.61591 10.7069C7.31523 10.6501 7.10496 10.8183 6.98511 11.1232C6.93044 11.262 6.89469 11.4344 6.87997 11.6215C6.86736 11.796 6.87156 11.9895 6.89259 12.185C6.97039 12.8957 7.2963 13.6401 7.90398 13.7284C7.93762 13.7347 7.97126 13.7347 8.0028 13.7284V13.8966C8.0028 13.9176 8.00491 13.9408 8.00911 13.9618C8.26984 15.2024 9.30016 16.178 10.2464 16.9623C12.4479 18.7854 14.9837 17.9842 16.5271 16.3736C17.3745 15.4884 17.9001 14.826 17.8602 13.8314C17.8602 13.8272 17.8602 13.823 17.8602 13.8188V13.7284C17.8854 13.7305 17.9106 13.7305 17.938 13.7263C18.5435 13.638 18.8716 12.8957 18.9494 12.1829C18.9725 11.9874 18.9746 11.7939 18.962 11.6194C18.9473 11.4323 18.9115 11.262 18.8568 11.1211C18.7454 10.8414 18.5604 10.6774 18.2954 10.6963L18.6234 10.4903C18.6255 10.4482 18.6276 10.4083 18.6298 10.3683C18.7959 9.87419 18.7664 9.43894 18.5898 9.05835C18.6361 9.0163 18.6739 8.97424 18.7012 8.93009C18.8211 8.74085 18.8926 8.51586 18.922 8.25302ZM8.71141 9.4873C10.1013 10.0235 12.1682 10.2274 13.0072 10.2674C13.6758 10.2989 15.6082 10.0887 17.0506 9.70808C17.181 9.91625 17.2903 10.1412 17.3766 10.383H17.3723V13.8188C16.7584 17.1957 12.8894 19.1596 9.60294 15.7533C8.85229 15.0195 8.69669 15.0657 8.45278 13.8945V10.1328C8.50114 9.90363 8.59155 9.68705 8.71141 9.4873ZM20.7871 3.43368V6.85685H20.8964C20.97 6.85685 21.031 6.91782 21.031 6.99142V7.91239C21.031 7.98598 20.97 8.04696 20.8964 8.04696H20.7871V8.36867C20.9238 8.3939 21.0289 8.51586 21.0289 8.66094C21.0289 8.82285 20.8943 8.95742 20.7324 8.95742H20.2005C20.0364 8.95742 19.904 8.82285 19.904 8.66094C19.904 8.51586 20.0091 8.39601 20.1458 8.36867V8.04696H20.0385C19.965 8.04696 19.904 7.98598 19.904 7.91239V6.99142C19.904 6.91782 19.965 6.85685 20.0385 6.85685H20.1458V3.63343L14.5421 5.37656C13.5265 5.61837 12.5131 5.63308 11.4975 5.37656L5.31347 3.5304L4.75416 3.36429C4.05817 3.08043 4.2327 2.41178 4.88032 2.25618L11.8759 0.168217C12.5972 -0.0378457 13.3184 -0.0693859 14.0396 0.168217L20.9091 2.23095C21.6555 2.41178 21.8027 3.10356 20.9343 3.38742L20.7871 3.43368ZM9.42001 17.9443C10.709 20.4381 14.9459 20.5369 16.4177 17.9443C17.6814 19.0818 22.1349 19.311 23.5269 20.0869C23.9664 20.3329 24.3659 20.6462 24.6855 21.0668C25.7347 22.4503 25.4719 22.3746 25.8377 24H0C0.388996 22.2758 0.565621 21.0499 2.31085 20.0869C4.16541 19.0545 7.94183 19.2753 9.42001 17.9443ZM13.9555 11.0853C13.6128 11.2157 13.5392 11.5017 13.7305 11.6089C13.9555 11.7351 14.2415 11.5458 14.4601 11.4764C15.0342 11.2935 15.7175 11.2725 16.2138 11.5837C16.3462 11.6657 16.4808 11.7729 16.6175 11.9033C16.567 11.7224 16.4871 11.5563 16.3715 11.4091C15.8773 10.7762 14.622 10.7405 13.9555 11.0853ZM11.7855 11.0853C12.1283 11.2157 12.2019 11.5017 12.0105 11.6089C11.7855 11.7351 11.4996 11.5458 11.2809 11.4764C10.7069 11.2935 10.0235 11.2725 9.52725 11.5837C9.39478 11.6657 9.26021 11.7729 9.12353 11.9033C9.174 11.7224 9.2539 11.5563 9.36955 11.4091C9.86578 10.7762 11.119 10.7405 11.7855 11.0853ZM9.99614 12.3154C9.92255 12.3448 9.84265 12.2986 9.81531 12.2166C9.79008 12.1325 9.83003 12.04 9.90363 12.0126C10.4714 11.7918 11.0496 11.8066 11.6194 12.0126C11.693 12.04 11.7351 12.1304 11.7119 12.2145C11.6888 12.2986 11.6089 12.3448 11.5353 12.3196C11.4407 12.286 11.3461 12.2565 11.2514 12.2355C11.262 12.2691 11.2662 12.3049 11.2662 12.3427C11.2662 12.5614 11.0895 12.7401 10.8688 12.7401C10.6501 12.7401 10.4714 12.5614 10.4714 12.3427C10.4714 12.2881 10.4819 12.2376 10.5008 12.1913C10.3284 12.2082 10.1581 12.2523 9.99614 12.3154ZM14.5758 12.3364C14.5758 12.5551 14.7545 12.7338 14.9732 12.7338C15.1919 12.7338 15.3706 12.5551 15.3706 12.3364C15.3706 12.2734 15.3559 12.2145 15.3306 12.1619C15.5031 12.1808 15.6797 12.2187 15.8542 12.2755C15.9299 12.3007 16.0077 12.2502 16.0287 12.164C16.0498 12.0778 16.0056 11.9895 15.932 11.9643C15.646 11.8696 15.3601 11.8234 15.0741 11.8255C14.7903 11.8255 14.5064 11.8738 14.2267 11.9664C14.151 11.9916 14.109 12.0799 14.13 12.164C14.151 12.2481 14.2309 12.2986 14.3045 12.2734C14.4013 12.2418 14.5001 12.2145 14.601 12.1956C14.5842 12.2418 14.5758 12.2881 14.5758 12.3364ZM12.4268 14.4601C12.349 14.395 12.3385 14.2793 12.4037 14.2015C12.4689 14.1237 12.5845 14.1132 12.6623 14.1784C12.7549 14.2562 12.8432 14.2982 12.9273 14.2982C13.0114 14.3003 13.1039 14.2604 13.2027 14.1784C13.2805 14.1132 13.3962 14.1258 13.4614 14.2036C13.5265 14.2814 13.5139 14.3971 13.4361 14.4622C13.2679 14.601 13.0955 14.6683 12.9231 14.6641C12.7338 14.6599 12.5698 14.58 12.4268 14.4601ZM11.8507 15.6545C11.7561 15.604 11.7203 15.4862 11.7708 15.3937C11.8213 15.2991 11.939 15.2634 12.0315 15.3138C12.3301 15.4715 12.6224 15.5514 12.9105 15.5535C13.1985 15.5535 13.4866 15.4757 13.7768 15.3159C13.8714 15.2655 13.987 15.2991 14.0396 15.3916C14.0901 15.4841 14.0564 15.6019 13.9639 15.6545C13.617 15.8458 13.2679 15.9404 12.9126 15.9383C12.5362 15.9362 12.1808 15.829 11.8507 15.6545ZM7.94813 13.2953V11.5563C7.86823 11.2199 7.72315 11.1211 7.55703 11.0895C7.10916 11.0202 7.15122 13.1901 7.94813 13.2953Z"
                      fill="currentColor"
                    />
                  </g>
                </g>
                <defs>
                  <clipPath id="clip0_2341_1482">
                    <rect width="25.8377" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>

              <span>Users</span>
            </router-link>
          </li>
        </ul>
      </nav>
    </aside>
    <main class="flex-1 flex flex-col xl:ml-72" @click="toggleSidebar(false)">
      <header class="sticky top-0 bg-white drop-shadow-md z-10">
        <div
          class="flex px-6 py-3 items-center justify-between border-b border-grey-300"
        >
          <div class="flex items-center gap-6" @click.stop>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-black cursor-pointer xl:hidden block"
              @click="toggleSidebar(true)"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
              />
            </svg>
          </div>

          <div class="flex gap-8 items-center">
            <img :src="avatar" alt="avatar" @mouseover="showName = !showName" />
            <button
              v-if="showName"
              class="rounded px-3 py-2 text-white bg-dark-blue-2 cursor-pointer"
              @click="handleLogout"
            >
              Logout
            </button>
          </div>
        </div>
        <div class="breadcrumb px-6 py-2">
          <span
            ><span class="font-merriweather text-primary-500">Dashboard </span>|
            {{ routeName }}
          </span>
        </div>
      </header>

      <div
        class="flex-1 p-6 bg-light-blue"
        :class="[isSideBarOpen ? 'pointer-events-none' : null]"
      >
        <div class="h-full bg-white rounded">
          <router-view />
        </div>
      </div>

      <footer
        class="font-open-sans text-sm flex flex-wrap gap-3 items-center sm:justify-between text-grey px-6 py-4"
      >
        <div class="flex flex-wrap gap-5">
          <span> Terms & Conditions</span> <span>Privacy Policy</span>
        </div>
      </footer>
    </main>
  </div>
</template>

<script setup lang="ts">
import avatar from "@/assets/images/avatar.svg";
import { useRouter } from 'vue-router';
import { ref } from "vue";
const router = useRouter()



let isSideBarOpen = ref(false);
let showName = ref(false);
let routeName = ref<String>("Dashboard");

function toggleSidebar(val: boolean) {
  isSideBarOpen.value = val;
}

function handleLogout() {
  router.push({path: '/login'})
}
</script>
